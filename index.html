<!DOCTYPE html>
<html>
  <head>
    
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta http-equiv="refresh" content=40>
    <link href="http://fonts.googleapis.com/css?family=Lato:100,300,400">
    <title>Twiddler</title>

  </head>
  <body>
    <header>
      <div class="parent-nav">

        <div class="flex-bar">
          <section class="flex nav-item1">
            <h1>
              Twiddler
              <i class="fa-stack fa-lg">
                <i class="fa fa-twitter fa-stack-2x"></i>
                
              </i>
            </h1>
          </section>
          <section class="flex nav-item2">
            <div>placeholder</div>
          </section>
          <section class="flex nav-item3">
            <div>placeholder</div>
          </section>
        </section>
      </div>
    </header>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script type="text/javascript">
      
      $(document).ready(function(){

        // var newPage = $("<div data-role=page data-url=yay><div data-role=header><h1>YAY!!!!</h1></div><div data-role=content><img src=http://bukk.it/yay.gif /></div></div");

        // //append it to the page container
        // newPage.appendTo( $.mobile.pageContainer );

        // //go to it
        // $.mobile.changePage( newPage );

        var $body = $('body');
        // $body.html('');
        var $cacheTally = {};
        var $trendingTopic = '';

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          
          var $tweetText = $(`<p class=tweet-text></p>`);
          $tweetText.text(tweet.message);

          var $tweetUser = $(`<p class=tweet-user></p>`);
          $tweetUser.text('@'+tweet.user);

          var $trendCont = $(`<li class="trend-container-${index}"></li>`);
          var $trendContClass = `.trend-container-${index}`;

          var $tweetCont = $(`<li class="tweet-container-${index}"></li>`);
          var $tweetContClass = `.tweet-container-${index}`;
          var $tweetTimeStamp = $(`<p>${streams.home[index].created_at}</p>`);

          //container for user, text, time stamp
          $tweetCont.appendTo(".tweet-bar");

          
          //content for tweet container
          $tweetUser.appendTo($tweetContClass);

          $tweetText.appendTo($tweetContClass);
          $tweetTimeStamp.appendTo($tweetContClass);
          
          //content for trend container
          
          //make sure that there is actually a hash before appending.
         

            //this obtains a tally of all the hash tags but it's not as useful as i like
            //without more data or more hash tags.
          $cacheTally = Object.assign($cacheTally, tweet.message.split(' ')
              .filter( item => item[0] === '#')
              .reduce( (accum, item) => {
                if (accum[item]) {
                  accum[item]++;
                } else {
                  accum[item] = 1;
                }
                return accum;
              },{})
              )
              //#consult hack-reactor guide.              
          
            
          index -= 1;
        }
        $trendCont.appendTo(".trend-bar");
        
        const showTrends = () => {
          for (let key in $cacheTally) {
            $(`<p class="trending-tag">${key}<p>`).appendTo($trendContClass);
          }  
        }


      });
    </script>
    <section class="grid">
      <div class="row"><!--
        info bar 1
        --><section class="col-1-3">
          <ul class="list-bar">
          <li class="logo">
          </li>
          <li class="user-info">
            <div class=flex-5>
              <ul>
                <li class="twoof5">mario mui</li>
                <li class="threeof5">@mariomui</li>
              </ul>
            </div>
          </li>
          <li>
            <div class="half-circle"></div>
          </li>
        </ul>
        <ul class="trend-bar">
          
        </ul>
        </section><!--
          tweetbar
        --><section class="content col-2-3">
          <ul class="tweet-bar">
          </ul>
        </section><!--
          info2bar
        --><section class="col-1-3">
          <div class="info-bar">

          </div>   
        </section>
      </div>
    </section>
    <footer>

    </footer>
  </body>
</html>
